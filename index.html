<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MediaPipe Hand Tracking</title>
  <style>
    body {
      margin: 0;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    canvas {
      position: absolute;
    }
    video {
      transform: scaleX(-1); /* mirror for natural tracking */
    }
  </style>
</head>
<body>

  <video id="video" autoplay playsinline></video>
  <canvas id="canvas"></canvas>

  <!-- MediaPipe Hands -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>

  <script>
    const video = document.getElementById("video");
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    // Initialize MediaPipe Hands
    const hands = new Hands({
      locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
    });

    hands.setOptions({
      maxNumHands: 1,
      modelComplexity: 1,
      minDetectionConfidence: 0.6,
      minTrackingConfidence: 0.6
    });

    hands.onResults(results => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(results.image, 0, 0, canvas.width, canvas.height);

      if (results.multiHandLandmarks) {
        results.multiHandLandmarks.forEach(landmarks => {
          let xs = landmarks.map(l => l.x);
          let ys = landmarks.map(l => l.y);

          let xMin = Math.min(...xs) * canvas.width;
          let xMax = Math.max(...xs) * canvas.width;
          let yMin = Math.min(...ys) * canvas.height;
          let yMax = Math.max(...ys) * canvas.height;

          // Draw bounding box
          ctx.strokeStyle = "lime";
          ctx.lineWidth = 3;
          ctx.strokeRect(xMin, yMin, xMax - xMin, yMax - yMin);
        });
      }
    });

    // Setup camera
    const camera = new Camera(video, {
      onFrame: async () => {
        await hands.send({ image: video });
      },
      width: 640,
      height: 480
    });

    camera.start();

    // Set canvas size after video loads
    video.onloadedmetadata = () => {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
    };
  </script>

</body>
</html>
